flowchart TD
  CENTRAL["~/.mcp-central/config/mcp-servers.json"] --> SYNC["mcp-auto-sync.py\n(~/.mcp-central/bin)"]

  subgraph Targets[目标配置 (仅写 MCP 段)]
    CODEX["Codex\n~/.codex/config.toml\n[mcp_servers.*]"]
    GEMINI["Gemini\n~/.gemini/settings.json\nmcpServers + mcp.allowed"]
    IFLOW["iFlow\n~/.iflow/settings.json\nmcpServers"]
    CLAUDE_FILE["Claude(文件)\n~/.claude/settings.json\nmcpServers"]
    CURSOR["Cursor\n~/.cursor/mcp.json\nmcpServers"]
    VSCODE["VS Code\n~/.config/Code/User/mcp.json\nservers"]
    DROID["Droid\n~/.factory/mcp.json\nmcpServers"]
  end

  SYNC --> CODEX
  SYNC --> GEMINI
  SYNC --> IFLOW
  SYNC --> CLAUDE_FILE
  SYNC --> CURSOR
  SYNC --> VSCODE
  SYNC --> DROID

  CLAUDE_REG["Claude(注册表)\nclaude mcp add/remove\n(~/.claude.json 项目作用域)"]
  SYNC -. 兜底注册 .-> CLAUDE_REG

  RUNTIME[运行时（stdio）]
  CODEX --> RUNTIME
  GEMINI --> RUNTIME
  IFLOW --> RUNTIME
  CLAUDE_REG --> RUNTIME
  CURSOR --> RUNTIME
  VSCODE --> RUNTIME
  DROID --> RUNTIME

  subgraph Servers[MCP Servers (本机)]
    CDT["chrome-devtools\ncommand: npx\nargs: -y chrome-devtools-mcp@0.9.0"]
    PW["playwright\n~/.nvm/.../mcp-server-playwright"]
    FS["filesystem\n~/.nvm/.../mcp-server-filesystem"]
    ST["sequential-thinking\n~/.nvm/.../mcp-server-sequential-thinking"]
    CMC["codex-cli\n~/.nvm/.../codex-mcp"]
    CTX7["context7\n~/.nvm/.../context7-mcp"]
    SERENA["serena\n~/.local/bin/serena start-mcp-server"]
  end

  RUNTIME --> CDT
  RUNTIME --> PW
  RUNTIME --> FS
  RUNTIME --> ST
  RUNTIME --> CMC
  RUNTIME --> CTX7
  RUNTIME --> SERENA

  CDT_LOCAL["可选(默认禁用)\nchrome-devtools-local\n--browserUrl http://127.0.0.1:9222"]
  RUNTIME -.-> CDT_LOCAL

