flowchart TD
  CENTRAL["~/.mcp-central/config/mcp-servers.json"] --> SYNC["mcp-auto-sync.py<br/>(~/.mcp-central/bin)"]
  CENTRAL --> MCPCTL["mcpctl<br/>per-client apply<br/>status/apply-cli/run/ide-all"]

  subgraph Targets
    CODEX["Codex<br/>~/.codex/config.toml<br/>[mcp_servers.*]"]
    GEMINI["Gemini<br/>~/.gemini/settings.json<br/>mcpServers + mcp.allowed"]
    IFLOW["iFlow<br/>~/.iflow/settings.json<br/>mcpServers"]
    CLAUDE_FILE["Claude(file)<br/>~/.claude/settings.json<br/>mcpServers"]
    CURSOR["Cursor<br/>~/.cursor/mcp.json<br/>mcpServers"]
    VSCODE["VS Code<br/>~/.config/Code/User/mcp.json<br/>servers"]
    DROID["Droid<br/>~/.factory/mcp.json<br/>mcpServers"]
  end

  SYNC --> CODEX
  SYNC --> GEMINI
  SYNC --> IFLOW
  SYNC --> CLAUDE_FILE
  SYNC --> CURSOR
  SYNC --> VSCODE
  SYNC --> DROID
  MCPCTL --> CODEX
  MCPCTL --> GEMINI
  MCPCTL --> IFLOW
  MCPCTL --> CLAUDE_FILE
  MCPCTL --> CURSOR
  MCPCTL --> VSCODE
  MCPCTL --> DROID

  CLAUDE_REG["Claude(register)<br/>claude mcp add/remove<br/>(~/.claude.json project scope)"]
  SYNC -. fallback .-> CLAUDE_REG

  RUNTIME[Runtime stdio]
  CODEX --> RUNTIME
  GEMINI --> RUNTIME
  IFLOW --> RUNTIME
  CLAUDE_REG --> RUNTIME
  CURSOR --> RUNTIME
  VSCODE --> RUNTIME
  DROID --> RUNTIME

  subgraph Servers
    CDT["chrome-devtools<br/>command: npx<br/>args: -y chrome-devtools-mcp@latest"]
    PW["playwright<br/>command: npx<br/>args: -y @playwright/mcp@latest"]
    FS["filesystem<br/>command: npx<br/>args: -y mcp-server-filesystem@latest"]
    ST["sequential-thinking<br/>command: npx<br/>args: -y @modelcontextprotocol/server-sequential-thinking@latest"]
    CMC["codex-cli<br/>command: npx<br/>args: -y @cexll/codex-mcp-server@latest"]
    CTX7["context7<br/>command: npx<br/>args: -y @upstash/context7-mcp@latest"]
    TMA["task-master-ai<br/>command: npx<br/>args: -y task-master-ai@latest"]
    SERENA["serena<br/>~/.local/bin/serena start-mcp-server"]
  end

  RUNTIME --> CDT
  RUNTIME --> PW
  RUNTIME --> FS
  RUNTIME --> ST
  RUNTIME --> CMC
  RUNTIME --> CTX7
  RUNTIME --> TMA
  RUNTIME --> SERENA

  CDT_LOCAL["optional (disabled by default)<br/>chrome-devtools-local<br/>--browserUrl http://127.0.0.1:9222"]
  RUNTIME -.-> CDT_LOCAL
